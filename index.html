<!DOCTYPE html>
<html>
  <head>
    <title>Bearth World</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="app.min.css">
    <style>
      /* .app-content{
        background-color:#ffffff;
      } */
      #app-section-lunch-screen{
        background-color:#ffffff;
        margin-top: 10px;
        margin-bottom: auto;
        height: 100%;
      }
      #login-section{
        background-color:#ffffff;
        border: 0px solid #ffffff;
        margin-top:50%;
        margin-bottom: auto;
        height: auto;
      }
      #logo-lunch-screen{
        padding-left: 25%;
        padding-top: 50%;
        width:50%;
        height: 20%;
      }
      #footer-lunch-screen{
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 25%;
      }
      #form-input{
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 500px;
        box-sizing: border-box;

      }
      #loginBtn{
        background-color:#f25a64;
        color: #ffffff;
        border-radius: 500px;
        margin-top: 5%
      }
      #registerBtn{
        background-color:#a1777a;
        color: #ffffff;
        border-radius: 500px;
        margin-top: 5%
      }
      #logo-only{
        width:35%;
        height: 20%;
        padding-left: 25%;
      }
      #topbar-btn{
        height:35px;
      }
      #parking{
        position: fixed;
        bottom: 10px;
        right:10px;
        background-color:#347ac5ff;
        width: 75px;
        height: 75px;
        border-radius: 50%
      }
      #parking-btn{
        width: 50px;
        height: 35px;
        padding-top: 20px;
      }
      #topbar-title{
        font-weight: bold;      
      }
      .app-topbar{
        position: fixed;
        
      }
      .app-list{

        margin-top: 50px;

      }
      #take-me-btn{
        width: 35%;
        height: 35px;
        border-radius: 500px;
        margin-top: 2%;
        margin-bottom: 2%;
      }
      #app-name{
        color: #F78F8F;
        padding-left: 25%;



      }
        a:link {
        color: #ffffff;
        text-decoration: none;
      }

      /* visited link */
      a:visited {
        color: #ffffff;
        text-decoration: none;
      }

      /* mouse over link */
      a:hover {
        color:  #ffffff;
        text-decoration: none;
      }

      /* selected link */
      a:active {
        color:  #ffffff;
        text-decoration: none;
      }

    </style>
  </head>

  <body>
    <!-- Lunch Screen Page 1 -->
    <div class="app-page" data-page="home">
      <div class="app-content">
        <div class="app-section" id="app-section-lunch-screen">
          <img src="images/logo.png" class="center" id="logo-lunch-screen">
          <h2 id="app-name" class="center">Bearth World</h2>
          
          <img src="images/footer.png" class="center" id="footer-lunch-screen">
        </div>
      </div>
    </div>
    <!-- login Page 2-->
    <div class="app-page" data-page="page2">
      <div class="app-content">
       
        <div class="app-topbar red">
          <div class="app-title">Login</div>
          
        </div>
        <div class="app-section" id="login-section">
          <p>E-mail</p>
          <input class="app-input emailVal" id="form-input" type="email" placeholder="x@domain.com">
          <p>Password</p>
          <input class="app-input passwordVal" id="form-input" type="password" placeholder="Password">
          <div class="app-button" id="loginBtn">LOGIN</div>
          <div class="app-button" id="registerBtn">REGISTER</div>
        </div>
        <img src="images/footer.png" class="center" id="footer-lunch-screen">
      </div>
    </div>
     <!-- registeration page  3 -->
     <div class="app-page" data-page="page3">
      <div class="app-content">
        <div class="app-topbar red">
            <div class="app-title">Register</div>
              
        </div>
        <br>
        <br>
         <div class="app-section" id="">
           <p>First Name</p>
           <input class="app-input fNameVal" id="form-input" placeholder="First Name">
           <p>Last Name</p>
           <input class="app-input lNameVal" id="form-input" placeholder="Last Name">
           <p>Phone Number</p>
           <input class="app-input phoneVal" id="form-input" placeholder="1112223333">
           
         </div>
         <div class="app-section" id="">
           <p>E-mail</p>
           <input class="app-input emailVal" id="form-input" type="email" placeholder="x@domain.com">
           <p>Password</p>
           <input class="app-input passwordVal" id="form-input" type="password" placeholder="Password">
           
          </div>
          <div class="app-section" id="">
           <p>Address</p>
           <input class="app-input addressVal" id="form-input" placeholder="1234 St name">
           <p>City</p>
           <input class="app-input cityVal" id="form-input" placeholder="City name">
           <p>State</p>
           <select name="state" class="app-input stateVal">
            <option value="AL">Alabama</option>
            <option value="AK">Alaska</option>
            <option value="AZ">Arizona</option>
            <option value="AR">Arkansas</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PA">Pennsylvania</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
          </select>
           <p>Zip Code</p>
           <input class="app-input zipVal" id="form-input" placeholder="12345">
          
        </div>
        <div class="app-section" id="">
          <p>Facebook</p>
          <input class="app-input fbVal" id="form-input" placeholder="">
          <p>Twitter</p>
          <input class="app-input twitterVal" id="form-input" placeholder="">
        </div>
          <div class="app-section" id="">
          <p>Register as:</p>
          <label class="container">
            <input type="radio" id='usert-type'  name="userTypeVal" value='c'>
            Client
            <span class="checkmark"></span>
          </label>
          <label class="container">
              <input type="radio" id='usert-type' name="userTypeVal" value='d'>
            Doula
            
            <span class="checkmark"></span>
          </label>
          <label class="container">
              <input type="radio" id='usert-type' name="userTypeVal" value='m'>
            
            Midwife
            
            <span class="checkmark"></span>
          </label>

           <div class="app-button" id="registerBtn">REGISTER</div>
         </div>
         
       </div>
    </div>
       <!-- parking list page 4 -->
    <div class="app-page" data-page="page4">
      <div class="app-content">
        <div class="app-topbar blue">
          <div class="app-button left blue" id="refreshBtn"><img src="images/refresh.png" id="topbar-btn"></div>
          <div class="app-title" Id="topbar-title"></div>
          <div class="app-button right blue" id="logoutBtn"><img src="images/logout.png" id="topbar-btn"></div>
        </div>
        <ul class="app-list" id="parking-lots-list">
            
        </ul>

        <div class="app-button blue" id="parking"><img src="images/parking.png" id="parking-btn"></div>
      </div>
    </div>
   
    <!-- parking reservation page  5 -->
    <div class="app-page" data-page="page5">
            <div class="app-content">
                <div class="app-topbar blue">
                    <div class="app-button left blue" id="backBtn"><img src="images/back.png" id="topbar-btn"></div>
                    <div class="app-title" Id="topbar-title">Reserve Parking</div>
                </div>
              
            </div>
          </div>

    <!-- JavaScript Code -->
    <script src="zepto.js"></script>
    <script src="app.min.js"></script>
    <script>
      App.controller('home', function (page) {
     $("#app-section-lunch-screen").ready(function() {
          if (typeof localStorage !== 'undefined') {

            if (localStorage.getItem("login-status") !== null && localStorage.getItem("login-status") == 1) {

              setTimeout(function() {
                App.load('page4');
              }, 4500);

            }else{

              setTimeout(function() {
                App.load('page2');
              }, 4500);

            }
          }
	      }); 
      });

      App.controller('page2', function (page) {
        
            $(page).find('#loginBtn').clickable().on('click', function () {
              if($(".emailVal").val() != null && $(".emailVal").val() != " " && $(".passwordVal").val() != null && $(".passwordVal").val() != " "){
                console.log("User login ok");
              }else{
                console.log("please enter all information");
              }
            
                /* $.ajax({
                  type: 'GET',
                  url: 'https://www.mohzary.com/umkcsps/login.php?callback=response',
                  data: { username: $(".userNameVal").val(), password: $(".passwordVal").val()},
                  dataType: 'jsonp',
                  timeout: 1000,
                  context: $('body'),
                  success: function(data){
                    if(data.success.length === 5 ){
                      if (typeof localStorage !== 'undefined') {
                        localStorage.setItem("user-id", data.success[0]);
                        localStorage.setItem("user-fname", data.success[1]);
                        localStorage.setItem("user-lname", data.success[2]);
                        localStorage.setItem("user-status", data.success[3]);
                        localStorage.setItem("user-campus", data.success[4]);
                        localStorage.setItem("login-status", 1);
                        App.load('page4');
                      }


                    }
              
                    
        
        
                  },
                  error: function(xhr, type){
      
                    console.log("There is an error!" + type);     
        
                  } 
                }) */

              
              });
        

        $(page).find('#registerBtn').clickable().on('click', function () { 

          App.load('page3');

        });
      });
      App.controller('page3', function (page) {
       

       $(page).find('#registerBtn').clickable().on('click', function () {
         if($(".fNameVal").val() != null && $(".fNameVal").val() !== " " 
   && $(".lNameVal").val() != null && $(".lNameVal").val() != " " 
   && $(".phoneVal").val() != null && $(".phoneVal").val() != " " 
   && $(".emailVal").val() != null && $(".emailVal").val() != " " 
   && $(".passwordVal").val() != null && $(".passwordVal").val() != " "
   && $(".addressVal").val() != null && $(".addressVal").val() != " " 
   && $(".cityVal").val() != null && $(".cityVal").val() != " " 
   && $(".stateVal").val() != null && $(".stateVal").val() != " " 
   && $(".zipVal").val() != null && $(".zipVal").val() !== " " 
   && $("input[name='userTypeVal']:checked").val() != null && $("input[name='userTypeVal']:checked").val() != " " 
   ){
    /*  $.ajax({
             type: 'POST',
             url: 'https://www.mohzary.com/umkcsps/register.php?callback=response',
             data: {fname:$(".fNameVal").val(), lname: $(".lNameVal").val(),phone:$(".phoneVal").val(), email:$(".emailVal").val(), password:$(".passwordVal").val(),address:$(".addressVal").val(),city: $(".cityVal").val(),state:$(".stateVal").val(), zipcode:$(".zipVal").val(),fbook:$(".fbVal").val(), twitter:$(".twitterVal").val(), usertype:$("input[name='userTypeVal']:checked").val()},
             dataType: 'jsonp',
             timeout: 1000,
             context: $('body'),
             success: function(data){
               if(data.success == "1" ){
                   console.log("user is registered");
                   App.load('page2');
                 


               }else{

                 console.log(data.success);

               }
         
               
   
   
             },
             error: function(xhr, type){
 
               console.log("There is an error!" + type);     
   
             } 
           }) */
     }else{

     window.alert("Please make sure to fill all data in the form.");
   }

           /*  */

           
         });
   


 });

      App.controller('page4', function (page) {

        if (typeof localStorage !== 'undefined') {
          $(page).find("#topbar-title").html(localStorage.getItem("user-campus"));
          console.log(localStorage.getItem("login-status"));
          console.log(localStorage.getItem("user-fname"));
          console.log(localStorage.getItem("user-lname"));
          console.log(localStorage.getItem("user-status"));
          console.log(localStorage.getItem("user-campus"));
          console.log(localStorage.getItem("user-id"));
          
          

        }
    
        $("#parking-lots-list").ready(function() {
          if (typeof localStorage !== 'undefined') {
            if(localStorage.getItem("user-status") == "student" || localStorage.getItem("user-status") == "staff"){
              $(page).find("#parking").hide();
            }
            $.ajax({
                  type: 'GET',
                  url: 'https://www.mohzary.com/umkcsps/lots.php?callback=response',
                  data: { campus: localStorage.getItem("user-campus"), permit: localStorage.getItem("user-status")},
                  dataType: 'jsonp',
                  timeout: 1000,
                  context: $('body'),
                  success: function(data){
                    console.log("Your Data is : " + data.success);  
                    $(page).find("#parking-lots-list").html(data.success);
                  },
                  error: function(xhr, type){
      
                    console.log("There is an error!" + type);     
        
                  } 
                })



          }



        });


        $(page).find('#logoutBtn').clickable().on('click', function () { 
          if (typeof localStorage !== 'undefined') {
              localStorage.setItem("user-id", "");
              localStorage.setItem("user-fname", "");
              localStorage.setItem("user-lname", "");
              localStorage.setItem("user-status", "");
              localStorage.setItem("user-campus", "");
              localStorage.setItem("login-status", 0);
              App.load('home');
          }

        });
        
        $(page).find('#refreshBtn').clickable().on('click', function () { 

          if (typeof localStorage !== 'undefined') {
            if(localStorage.getItem("user-status") == "student" || localStorage.getItem("user-status") == "staff"){
              $(page).find("#parking").hide();
            }
            $.ajax({
                  type: 'GET',
                  url: 'https://www.mohzary.com/umkcsps/lots.php?callback=response',
                  data: { campus: localStorage.getItem("user-campus"), permit: localStorage.getItem("user-status")},
                  dataType: 'jsonp',
                  timeout: 1000,
                  context: $('body'),
                  success: function(data){
                    console.log("referesh is done"); 
                    console.log("Your Data is : " + data.success); 
                    $(page).find("#parking-lots-list").html(data.success);
                  },
                  error: function(xhr, type){
      
                    console.log("There is an error!" + type);     
        
                  } 
                })



          }

        });

        $(page).find('#parking').clickable().on('click', function () { 

          App.load('page5');

        });
        

      });

      
      App.controller('page5', function (page) {
        $(page).find('#backBtn').clickable().on('click', function () { 

          App.load('page3');

        });

      });

      try {
        App.load('home');
      } catch (err) {
        App.load('home');
      }
    </script>
  </body>
</html>
